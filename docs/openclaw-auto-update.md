# OpenClaw è‡ªå‹•æ›´æ–°æµç¨‹

ä½¿ç”¨ openclaw cronã€Telegram èˆ‡ kiro-cli å¯¦ç¾è‡ªå‹•ç‰ˆæœ¬æª¢æŸ¥èˆ‡æ›´æ–°ã€‚

## æ¦‚è¦½

ç•¶æœ‰æ–°ç‰ˆ openclaw æ™‚ï¼Œç³»çµ±æœƒé€é Telegram é€šçŸ¥ä½ ï¼Œä¸¦é™„ä¸Šé¢¨éšªè©•ä¼°ï¼ˆğŸŸ¢/ğŸŸ¡/ğŸ”´ï¼‰ã€‚ä½ å›è¦† `UPDATE CLAW` å¾Œï¼Œæ›´æ–°æœƒè‡ªå‹•åŸ·è¡Œï¼ŒåŒ…å« gateway é‡å•Ÿèˆ‡å®Œæˆç¢ºèªã€‚

## å·¥ä½œæµç¨‹

```
     TELEGRAM              OPENCLAW                 KIRO CLI
        â”‚                     â”‚                        â”‚
        â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
        â”‚          â”‚  cronï¼ˆæ¯å°æ™‚ï¼‰      â”‚             â”‚
        â”‚          â”‚  æ¯”è¼ƒç‰ˆæœ¬è™Ÿ          â”‚             â”‚
        â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
        â”‚                     â”‚                        â”‚
        â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
        â”‚          â”‚  ç™¼ç¾æ–°ç‰ˆæœ¬          â”‚             â”‚
        â”‚          â”‚  æŠ“å– release notes  â”‚             â”‚
        â”‚          â”‚  è®€å– openclaw.json  â”‚             â”‚
        â”‚          â”‚  åˆ†æé¢¨éšªç­‰ç´š        â”‚             â”‚
        â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
        â”‚                     â”‚                        â”‚
        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
        â”‚  "ğŸ¦ Xâ†’Y æœ‰æ–°ç‰ˆæœ¬   â”‚                        â”‚
        â”‚   é¢¨éšªè©•ä¼°ï¼šğŸŸ¡ mediumâ”‚                        â”‚
        â”‚   â€¢ breaking change â”‚                        â”‚
        â”‚   èªª UPDATE CLAW"   â”‚                        â”‚
        â”‚                     â”‚                        â”‚
        â”‚  ä½ é€å‡º             â”‚                        â”‚
        â”‚  UPDATE CLAW        â”‚                        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
        â”‚                     â”‚                        â”‚
        â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
        â”‚          â”‚  main agent         â”‚             â”‚
        â”‚          â”‚  workspace skill:   â”‚             â”‚
        â”‚          â”‚  update_claw        â”‚             â”‚
        â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
        â”‚                     â”‚                        â”‚
        â”‚                     â”‚  setsid kiro-cli       â”‚
        â”‚                     â”‚  "UPDATE CLAW"         â”‚
        â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
        â”‚                     â”‚                        â”‚
        â”‚                     â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚          â”‚  skill: openclaw-update   â”‚
        â”‚                     â”‚          â”‚  åŸ·è¡Œ openclaw-update.sh  â”‚
        â”‚                     â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                        â”‚
        â”‚                     â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚          â”‚  npm install -g           â”‚
        â”‚                     â”‚          â”‚  openclaw@latest          â”‚
        â”‚                     â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                        â”‚
        â”‚                     â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     X          â”‚  systemctl restart        â”‚â—„â”€ gateway é‡å•Ÿ
        â”‚                  ï¼ˆé‡å•Ÿä¸­ï¼‰    â”‚  openclaw-gateway         â”‚
        â”‚                     â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                        â”‚
        â”‚                     â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚          â”‚  è¼ªè©¢ openclaw health     â”‚
        â”‚                     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  ç›´åˆ° gateway å°±ç·’        â”‚
        â”‚                     â”‚  å°±ç·’    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                        â”‚
        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚  "ğŸ‰ å·²æ›´æ–°è‡³ Y"    â”‚                        â”‚
        â”‚                     â”‚                        â”‚
```

## å…ƒä»¶èªªæ˜

### openclaw cron æ’ç¨‹
- æ¯å°æ™‚åŸ·è¡Œä¸€æ¬¡ï¼Œä½¿ç”¨ç¨ç«‹ isolated agent session
- æ¯”è¼ƒ `openclaw --version` èˆ‡ `npm show openclaw version`
- ç‰ˆæœ¬ç›¸åŒæ™‚éœé»˜ï¼Œä¸ç™¼ä»»ä½•é€šçŸ¥
- ç™¼ç¾æ–°ç‰ˆæœ¬æ™‚ï¼š
  1. æŠ“å– GitHub release notesï¼ˆ`api.github.com/repos/openclaw/openclaw/releases/tags/v$LATEST`ï¼‰
  2. è®€å– `~/.openclaw/openclaw.json`
  3. åˆ†æ release notes å°ç…§ç•¶å‰ configï¼Œç”¢å‡ºé¢¨éšªç­‰ç´šèˆ‡å½±éŸ¿æ‘˜è¦
  4. ç™¼é€å«é¢¨éšªè©•ä¼°çš„ Telegram é€šçŸ¥

> âš ï¸ cron payload ç›´æ¥å…§åµŒå®Œæ•´æŒ‡ä»¤ï¼Œä¸ä¾è³´ skillï¼ˆisolated session ä¸è¼‰å…¥ skillï¼‰

### openclaw workspace skillï¼š`update_claw`
- è‡ªå‹•è¨»å†Šç‚º `/update_claw` Telegram slash command
- ä½ åœ¨ Telegram é€å‡º `/update_claw` æˆ– `UPDATE CLAW` æ™‚è§¸ç™¼
- ä½¿ç”¨ `setsid` è®“ kiro-cli è„«é›¢ gateway ç¨‹åºï¼Œç¢ºä¿ gateway é‡å•Ÿå¾Œä»èƒ½ç¹¼çºŒåŸ·è¡Œ

### kiro skillï¼š`openclaw-update`
- ç”± `UPDATE CLAW` è¨Šæ¯è§¸ç™¼
- åŸ·è¡Œ `~/.openclaw/scripts/openclaw-update.sh`

### æ›´æ–°è…³æœ¬ï¼š`openclaw-update.sh`
```bash
npm install -g openclaw@latest --ignore-scripts
openclaw doctor --fix --non-interactive   # ä¿®å¾© systemd service è¨­å®š
systemctl --user restart openclaw-gateway.service
# è¼ªè©¢ç›´åˆ° gateway å°±ç·’
openclaw message send ... "ğŸ‰ å·²æ›´æ–°è‡³ $NEW_VERSION"
```

## è¨­è¨ˆé‡é»

- **`setsid`** â€” è®“ kiro-cli è„«é›¢ openclaw gateway çš„ cgroupï¼Œç¢ºä¿ gateway é‡å•Ÿæ™‚ä¸è¢«ä¸€ä½µçµ‚æ­¢
- **`--ignore-scripts`** â€” é¿å… node v24 ä¸Š `@discordjs/opus` åŸç”Ÿç·¨è­¯å¤±æ•—
- **`openclaw doctor --fix`** â€” npm install å¾Œã€restart å‰åŸ·è¡Œï¼Œä¿®å¾© systemd service æŒ‡å‘æ­£ç¢ºçš„ node/binary
- **è¼ªè©¢ç­‰å¾…** â€” gateway é‡å•Ÿå¾Œæœ€å¤šç­‰å¾… 60 ç§’ï¼Œç¢ºèªå°±ç·’å¾Œæ‰ç™¼é€ TG ç¢ºèªè¨Šæ¯
- **ç¨ç«‹ cron session** â€” ç‰ˆæœ¬æª¢æŸ¥åœ¨ç¨ç«‹ isolated context åŸ·è¡Œï¼Œä¸æ±¡æŸ“ main session
- **inline cron message** â€” isolated session ä¸è¼‰å…¥ skillï¼Œå®Œæ•´æ­¥é©Ÿç›´æ¥å…§åµŒæ–¼ cron payload message

## å¸¸è¦‹å•é¡Œæ’é™¤

### Agent æŠ±æ€¨ã€Œå·¥å…·å£äº†ã€æˆ–æ‰¾ä¸åˆ° openclaw

Isolated session ä½¿ç”¨ç²¾ç°¡ PATHï¼Œæ‰¾ä¸åˆ° `~/.npm-global/bin/openclaw`ã€‚

```
isolated session exec
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PATH = /usr/local/bin:/usr/bin  â”‚  â† ç²¾ç°¡ PATH
â”‚        ç„¡ ~/.npm-global/bin     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ openclaw æ‰¾ä¸åˆ° â”‚â”€â”€â–º agent å›å ±ã€Œå·¥å…·å£äº†ã€âŒ
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  è¨­å®š tools.exec.pathPrepend å¾Œï¼š

isolated session exec
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PATH = ~/.npm-global/bin             â”‚
â”‚      + ~/.local/share/fnm/.../bin    â”‚
â”‚      + /usr/local/bin:...            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ openclaw âœ…       â”‚
        â”‚ npm âœ…            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è§£æ³•**ï¼šå°‡å¸¸ç”¨ binary symlink è‡³ `~/.local/bin/`ï¼Œå†è¨­å®š `tools.exec.pathPrepend`ï¼š

```bash
# å»ºç«‹ symlink
ln -sf ~/.npm-global/bin/openclaw ~/.local/bin/openclaw
ln -sf ~/.local/share/fnm/node-versions/<version>/installation/bin/npm ~/.local/bin/npm

# è¨­å®š pathPrependï¼ˆåªéœ€ä¸€å€‹è·¯å¾‘ï¼‰
openclaw config set tools.exec.pathPrepend '["~/.local/bin"]' --strict-json
systemctl --user restart openclaw-gateway.service
```

### UPDATE CLAW ä¸€ç›´è¦æ±‚äººå·¥æ ¸å‡†

`host=gateway` æ™‚ exec é è¨­éœ€è¦æ‰¹å‡†ã€‚éœ€è¦åŒæ™‚è¨­å®šå…©è™•ï¼š

```
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   agent exec è«‹æ±‚   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚       å–è¼ƒåš´æ ¼è€…             â”‚
        â”‚                              â”‚
        â”‚  tools.exec.ask              â”‚
        â”‚  (openclaw.json)             â”‚
        â”‚          vs                  â”‚
        â”‚  exec-approvals.json         â”‚
        â”‚  defaults.ask                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                    â”‚
         â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å…©è€…çš† off     â”‚  â”‚  ä»»ä¸€ç‚º on-miss      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚
         â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç›´æ¥åŸ·è¡Œ âœ…    â”‚  â”‚  è¦æ±‚äººå·¥æ‰¹å‡†        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  approval timeout   â”‚
                      â”‚  â†’ æ‹’çµ•åŸ·è¡Œ âŒ      â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> âš ï¸ `tools.exec.*` èˆ‡ `exec-approvals.json` å–**è¼ƒåš´æ ¼**è€…ï¼Œå…©è™•éƒ½è¦è¨­ã€‚

**1. `openclaw.json`ï¼ˆå…¨åŸŸï¼‰**ï¼š

```bash
openclaw config set tools.exec.ask off
openclaw config set tools.exec.security full
```

**2. `exec-approvals.json`ï¼ˆç”¨ CLIï¼Œå‹¿ç›´æ¥ç·¨è¼¯ï¼‰**ï¼š

ç›´æ¥ç·¨è¼¯ `exec-approvals.json` æœƒè¢« gateway é‡å•Ÿè¦†å¯«ã€‚è«‹ç”¨ CLIï¼š

```bash
# æ‰€æœ‰ agent å…è¨±è·‘ scripts/
openclaw approvals allowlist add --agent "*" "/home/<user>/.openclaw/scripts/*"

# main agent å…è¨± kiro-cli + setsid
openclaw approvals allowlist add --agent "main" "/home/<user>/.local/bin/kiro-cli"
openclaw approvals allowlist add --agent "main" "/usr/bin/setsid"
```

**3. Per-agent è¨­å®šï¼ˆæœ€çµ‚ä¿éšœï¼‰**ï¼š

```bash
openclaw config set agents.list[0].tools.exec.ask off
openclaw config set agents.list[0].tools.exec.security full
openclaw config set agents.list[0].tools.exec.host gateway
systemctl --user restart openclaw-gateway.service
```
